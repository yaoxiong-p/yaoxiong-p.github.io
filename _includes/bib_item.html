{%- comment -%}
  Custom item template for jekyll-scholar.
  Purpose: make the article title clickable (prefer URL, fallback to DOI link).
{%- endcomment -%}

{%- assign has_url = entry.url and entry.url != "" -%}
{%- assign has_doi = entry.doi and entry.doi != "" -%}
{%- if has_url -%}
  {%- assign link = entry.url -%}
{%- elsif has_doi -%}
  {%- assign link = "https://doi.org/" | append: entry.doi -%}
{%- else -%}
  {%- assign link = nil -%}
{%- endif -%}

<li id="{{entry.key}}">
  {%- comment -%} 标题（带引号 & 可点击） {%- endcomment -%}
  {%- if link -%}
    “<a href="{{ link }}" target="_blank" rel="noopener">{{ entry.title }}</a>”
  {%- else -%}
    “{{ entry.title }}”
  {%- endif -%}

  {%- comment -%} 用 CSL 输出其余部分（作者/期刊/年/卷/页/DOI），保持 ACS 风格 {%- endcomment -%}
  <span class="csl-rest">
    {%- reference -%}
  </span>
</li>
